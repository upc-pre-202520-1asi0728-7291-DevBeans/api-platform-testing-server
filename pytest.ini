[pytest]
# ============================================================================
# Configuración de pytest para Integration Tests - Grain Classification
# ============================================================================

# Directorio raíz para buscar tests
testpaths = .

# Patrón de archivos de test
python_files = *_test.py test_*.py

# Patrón de clases de test
python_classes = Test*

# Patrón de funciones de test
python_functions = test_*

# Markers personalizados
markers =
    us12: Tests para User Story 12 - Detección de Defectos Críticos
    us13: Tests para User Story 13 - Análisis de Color y Uniformidad
    us14: Tests para User Story 14 - Clasificación por Estándares Internacionales
    integration: Tests de integración completos
    slow: Tests que toman más tiempo en ejecutar
    unit: Tests unitarios (no usado actualmente, para futuro)

# Opciones de output
console_output_style = progress
addopts =
    -ra
    --strict-markers
    --tb=short
    --color=yes

# Filtrar warnings específicos
filterwarnings =
    # Ignorar deprecation warnings de Pydantic
    ignore::DeprecationWarning:pydantic.*:
    # Ignorar MovedIn20Warning de SQLAlchemy
    ignore::sqlalchemy.exc.MovedIn20Warning:

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S